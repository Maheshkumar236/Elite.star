<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite App - Gaming Arena</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #05050a; color: white; overflow-x: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .animate-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        input::placeholder { color: rgba(255,255,255,0.2); font-style: italic; }
    </style>
</head>
<body>

    <div id="app">
        <div id="loader" class="h-screen flex items-center justify-center text-orange-600 font-black italic tracking-widest animate-pulse">
            INITIALIZING ARENA...
        </div>
    </div>

    <script>
        // ==========================================
        // CONFIGURATION (अपनी Keys यहाँ बदलें)
        // ==========================================
        const firebaseConfig = {
  apiKey: "AIzaSyDPChNIAQz0gEmsuDFpACl0XvWm-DNcf2k",
  authDomain: "eliteweb-5b512.firebaseapp.com",
  projectId: "eliteweb-5b512",
  storageBucket: "eliteweb-5b512.firebasestorage.app",
  messagingSenderId: "474751993215",
  appId: "1:474751993215:web:88be5ffccdd88651cf464a",
  measurementId: "G-9HZY4280CY"
};

        const geminiApiKey = "YOUR_GEMINI_KEY";
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const appId = "ff-tournament-pro-final";

        // Global State
        let state = {
            user: null, userData: null, view: 'login', activeTab: 'home',
            matches: [], chatMessages: [], winners: [], notifications: [],
            isDarkMode: true, isAdminUnlocked: false, isStaffUnlocked: false
        };

        // --- AUTH CHECK ---
        auth.onAuthStateChanged(user => {
            if (user) {
                state.user = user;
                state.view = 'app';
                startDataListeners(user.uid);
            } else {
                state.view = 'login';
                render();
            }
        });

        async function handleRegister(e) {
            e.preventDefault();
            const f = new FormData(e.target);
            if (f.get('pass') !== f.get('confirmPass')) return alert("Passwords don't match!");
            
            try {
                // Email provider required for password logic
                const email = `${f.get('phone')}@elite.com`;
                const res = await auth.createUserWithEmailAndPassword(email, f.get('pass'));
                await db.collection('artifacts').doc(appId).collection('users').doc(res.user.uid).collection('profile').doc('data').set({
                    username: f.get('phone'), balance: 100, role: 'user', uid: res.user.uid, 
                    totalWins: 0, joinedMatches: [], inviteCode: f.get('invite')
                });
            } catch (err) { alert(err.message); }
        }

        async function handleLogin(e) {
            e.preventDefault();
            const f = new FormData(e.target);
            try {
                await auth.signInWithEmailAndPassword(`${f.get('phone')}@elite.com`, f.get('pass'));
            } catch (err) { alert("Login Error: Make sure number/pass is correct."); }
        }

        function startDataListeners(uid) {
            db.collection('artifacts').doc(appId).collection('users').doc(uid).collection('profile').doc('data')
                .onSnapshot(doc => { if(doc.exists()) state.userData = doc.data(); render(); });
            
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('matches')
                .onSnapshot(snap => { state.matches = snap.docs.map(d => ({id: d.id, ...d.data()})); render(); });

            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('chat')
                .onSnapshot(snap => { 
                    state.chatMessages = snap.docs.map(d => ({id: d.id, ...d.data()})).sort((a,b) => a.timestamp - b.timestamp).slice(-50);
                    render();
                });
        }

        // --- UI RENDERING (ORIGINAL ELITE DARK STYLE) ---
        function render() {
            const root = document.getElementById('app');
            if (state.view === 'login' || state.view === 'register') {
                root.innerHTML = renderAuthView();
            } else {
                root.innerHTML = renderAppView();
            }
            lucide.createIcons();
        }

        function renderAuthView() {
            const isLogin = state.view === 'login';
            return `
            <div class="min-h-screen flex flex-col items-center justify-center p-8 animate-in bg-[#05050a]">
                <div class="w-20 h-20 bg-orange-600 rounded-[2.2rem] flex items-center justify-center mb-6 shadow-2xl rotate-12">
                    <i data-lucide="gamepad-2" class="w-12 h-12 text-white"></i>
                </div>
                <h1 class="text-4xl font-black italic uppercase mb-2 text-orange-600">${isLogin ? 'ELITE LOGIN' : 'CREATE SQUAD'}</h1>
                <p class="text-gray-500 text-[10px] font-bold uppercase tracking-[0.4em] mb-12 italic">Join the Arena</p>
                
                <form onsubmit="${isLogin ? 'handleLogin(event)' : 'handleRegister(event)'}" class="w-full max-w-sm space-y-4">
                    <div class="relative">
                        <i data-lucide="smartphone" class="absolute left-4 top-5 w-5 h-5 text-gray-600"></i>
                        <input name="phone" type="tel" placeholder="Phone Number" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                    </div>
                    <div class="relative">
                        <i data-lucide="lock" class="absolute left-4 top-5 w-5 h-5 text-gray-600"></i>
                        <input name="pass" type="password" placeholder="Password" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                    </div>
                    ${!isLogin ? `
                        <div class="relative">
                            <i data-lucide="shield-check" class="absolute left-4 top-5 w-5 h-5 text-gray-600"></i>
                            <input name="confirmPass" type="password" placeholder="Confirm Password" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        </div>
                        <div class="relative">
                            <i data-lucide="user-plus" class="absolute left-4 top-5 w-5 h-5 text-gray-600"></i>
                            <input name="invite" type="text" placeholder="Invite code (Optional)" class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        </div>
                    ` : ''}
                    <button type="submit" class="w-full bg-orange-600 text-white font-black py-5 rounded-2xl uppercase tracking-widest text-xs active:scale-95 shadow-xl shadow-orange-600/20 transition-all">
                        ${isLogin ? 'ENTER ARENA' : 'JOIN SQUAD'}
                    </button>
                </form>
                <button onclick="state.view='${isLogin ? 'register' : 'login'}'; render();" class="mt-8 text-orange-500 text-[10px] font-black uppercase tracking-widest italic hover:underline">
                    ${isLogin ? 'New Survivor? Register' : 'Already have account? Login'}
                </button>
            </div>`;
        }

        function renderAppView() {
            return `
            <div class="min-h-screen pb-32 bg-[#05050a] text-white">
                <header class="fixed top-0 inset-x-0 h-16 bg-black/40 backdrop-blur-xl border-b border-white/5 flex items-center justify-between px-6 z-50">
                    <div class="flex items-center gap-2">
                        <i data-lucide="zap" class="text-orange-600 w-5 h-5 fill-orange-600"></i>
                        <h1 class="font-black italic text-lg uppercase tracking-tighter">ELITE APP</h1>
                    </div>
                    <div class="px-4 py-1.5 rounded-2xl flex items-center gap-2 text-xs font-black bg-white/5 border border-white/10 shadow-sm">
                        <i data-lucide="wallet" class="w-3.5 h-3.5 text-green-500"></i> ₹${state.userData?.balance || 0}
                    </div>
                </header>

                <main class="pt-24 px-6 max-w-lg mx-auto">
                    ${renderTabContent()}
                </main>

                <nav class="fixed bottom-6 inset-x-6 h-20 bg-black/60 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] flex items-center justify-around px-3 z-50 shadow-2xl overflow-x-auto no-scrollbar">
                    <button onclick="state.activeTab='home'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='home' ? 'text-orange-500' : 'text-gray-500'}"><i data-lucide="trophy" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Home</span></button>
                    <button onclick="state.activeTab='lobby'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='lobby' ? 'text-orange-500' : 'text-gray-500'}"><i data-lucide="message-square" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Lobby</span></button>
                    <button onclick="state.activeTab='match'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='match' ? 'text-orange-500' : 'text-gray-500'}"><i data-lucide="gamepad-2" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Match</span></button>
                    <button onclick="state.activeTab='settings'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='settings' ? 'text-orange-500' : 'text-gray-500'}"><i data-lucide="settings" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Profile</span></button>
                </nav>
            </div>`;
        }

        function renderTabContent() {
            if (state.activeTab === 'home') {
                return `
                <div class="space-y-8 animate-in">
                    <div class="relative h-48 w-full rounded-[2.5rem] overflow-hidden shadow-2xl border border-white/5 bg-black">
                        <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover opacity-60" />
                        <div class="absolute inset-0 bg-gradient-to-t from-black flex flex-col justify-end p-8">
                            <h2 class="text-2xl font-black italic uppercase text-white tracking-tighter">Grand Scrims</h2>
                            <p class="text-[10px] font-bold opacity-80 uppercase text-white italic">Elite Squads Only</p>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <h4 class="font-black text-[10px] uppercase italic text-gray-500 tracking-widest flex items-center gap-2"><i data-lucide="clock" class="w-4 h-4 text-orange-500"></i> LIVE TOURNAMENTS</h4>
                        ${state.matches.map(m => `
                            <div class="bg-white/5 border border-white/10 p-6 rounded-[2.5rem] relative border-l-4 border-l-orange-600 shadow-xl backdrop-blur-md">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-[9px] font-black uppercase text-orange-500 bg-orange-500/10 px-3 py-1 rounded-full">${m.map}</span>
                                    <span class="text-[9px] text-gray-500 font-bold italic">${m.time}</span>
                                </div>
                                <h5 class="text-xl font-black italic uppercase">${m.title}</h5>
                                <div class="mt-5 flex justify-between items-center">
                                    <div class="text-[10px] font-bold"><p class="text-gray-500 uppercase text-[8px]">Prize</p><p class="text-green-500 text-sm italic">₹${m.prizePool}</p></div>
                                    <button class="px-6 py-2.5 rounded-xl bg-orange-600 text-white text-[10px] font-black uppercase shadow-lg active:scale-95">JOIN ARENA</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
            }
            if (state.activeTab === 'lobby') {
                return `
                <div class="h-[70vh] flex flex-col animate-in">
                    <h2 class="text-2xl font-black italic uppercase flex items-center gap-2 mb-4"><i data-lucide="message-square" class="text-orange-500"></i> GLOBAL LOBBY</h2>
                    <div class="flex-1 bg-black/40 border border-white/5 rounded-[2.5rem] p-4 flex flex-col overflow-hidden relative backdrop-blur-xl">
                        <div class="flex-1 overflow-y-auto no-scrollbar space-y-4 pb-4 px-2">
                            ${state.chatMessages.map(msg => `
                                <div class="flex items-end gap-3 ${msg.uid === state.user?.uid ? 'flex-row-reverse' : ''}">
                                    <div class="max-w-[75%] p-3 rounded-2xl ${msg.uid === state.user?.uid ? 'bg-orange-600 text-white rounded-br-sm' : 'bg-white/10 text-gray-200 rounded-bl-sm border border-white/5'}">
                                        <p class="text-[8px] font-black uppercase text-orange-400 mb-1 italic">${msg.username}</p>
                                        <p class="text-xs font-medium">${msg.text}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>`;
            }
            if (state.activeTab === 'settings') {
                return `
                <div class="space-y-6 animate-in pb-12 text-center">
                    <div class="bg-white/5 p-8 rounded-[3rem] border border-white/10 space-y-6 shadow-2xl backdrop-blur-md">
                        <div class="w-32 h-32 rounded-[2.8rem] bg-orange-600/20 mx-auto flex items-center justify-center border-4 border-orange-600/30 shadow-2xl">
                            <i data-lucide="user" class="w-16 h-16 text-orange-500"></i>
                        </div>
                        <h4 class="font-black text-2xl italic uppercase text-orange-500">@${state.userData?.username || 'GAMER'}</h4>
                        <div class="bg-white/5 border border-white/10 rounded-3xl p-6 space-y-4 shadow-xl">
                            <div class="flex items-center justify-between">
                                <h5 class="font-black text-[10px] uppercase italic text-gray-400">WALLET</h5>
                                <span class="text-2xl font-black text-green-500 italic">₹${state.userData?.balance || 0}</span>
                            </div>
                        </div>
                        <button onclick="auth.signOut()" class="w-full bg-red-600/10 border border-red-600/20 text-red-500 py-6 rounded-2xl font-black uppercase text-[10px] italic shadow-xl transition-all active:scale-95">TERMINATE SESSION</button>
                    </div>
                </div>`;
            }
            return `<div class="py-20 text-center text-gray-600 font-black italic">ARENA UNDER CONSTRUCTION...</div>`;
        }

    </script>
</body>
</html>
        function initDataListeners(uid) {
            // Profile
            db.collection('artifacts').doc(appId).collection('users').doc(uid).collection('profile').doc('data')
                .onSnapshot(doc => { if(doc.exists()) state.userData = doc.data(); render(); });
            // Public Matches
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('matches')
                .onSnapshot(snap => { state.matches = snap.docs.map(d => ({id: d.id, ...d.data()})); render(); });
            // Chat
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('chat')
                .onSnapshot(snap => { 
                    state.chatMessages = snap.docs.map(d => ({id: d.id, ...d.data()})).sort((a,b) => a.timestamp - b.timestamp).slice(-50);
                    render();
                });
            // Config & Notify
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('config').doc('settings')
                .onSnapshot(doc => { if(doc.exists()) state.appConfig = doc.data(); render(); });
        }

        // --- HANDLERS ---
        async function handleRegister(e) {
            e.preventDefault();
            const f = new FormData(e.target);
            if(f.get('pass') !== f.get('confirmPass')) return alert("Password match nahi kar rahe!");
            try {
                const res = await auth.createUserWithEmailAndPassword(`${f.get('phone')}@elite.com`, f.get('pass'));
                await db.collection('artifacts').doc(appId).collection('users').doc(res.user.uid).collection('profile').doc('data').set({
                    username: f.get('phone'), balance: 100, role: 'user', uid: res.user.uid, totalWins: 0, joinedMatches: [], inviteCode: f.get('invite')
                });
            } catch (err) { alert(err.message); }
        }

        async function handleLogin(e) {
            e.preventDefault();
            const f = new FormData(e.target);
            try {
                await auth.signInWithEmailAndPassword(`${f.get('phone')}@elite.com`, f.get('pass'));
            } catch (err) { alert("Login failed! Check number/password."); }
        }

        // --- MAIN RENDER ---
        function render() {
            const root = document.getElementById('app');
            if (state.loading) return;

            if (state.view === 'login') {
                root.innerHTML = renderLogin();
            } else if (state.view === 'register') {
                root.innerHTML = renderRegister();
            } else {
                root.innerHTML = renderApp();
            }
            lucide.createIcons();
        }

        function renderLogin() {
            return `
            <div class="min-h-screen bg-white flex flex-col animate-in text-gray-800">
                <div class="bg-gradient-to-b from-red-500 to-red-600 p-10 pb-16 text-white relative">
                    <button class="absolute top-6 left-6"><i data-lucide="chevron-left"></i></button>
                    <div class="flex flex-col items-center mt-4">
                        <div class="bg-white p-2 rounded-xl mb-4"><i data-lucide="zap" class="text-red-600 w-8 h-8 fill-red-600"></i></div>
                        <h1 class="text-3xl font-black italic">Daman</h1>
                    </div>
                    <div class="mt-8">
                        <h2 class="text-2xl font-bold">Log in</h2>
                        <p class="text-xs opacity-80 mt-1">Please log in with your phone number or email</p>
                    </div>
                </div>
                <div class="flex-1 bg-gray-50 -mt-8 rounded-t-[2.5rem] p-8 space-y-6">
                    <div class="flex border-b border-gray-200">
                        <button class="flex-1 pb-4 border-b-2 border-red-500 text-red-500 font-bold flex flex-col items-center gap-1">
                            <i data-lucide="smartphone" class="w-5 h-5"></i> phone number
                        </button>
                        <button class="flex-1 pb-4 text-gray-400 font-bold flex flex-col items-center gap-1">
                            <i data-lucide="mail" class="w-5 h-5"></i> Email Login
                        </button>
                    </div>
                    <form onsubmit="handleLogin(event)" class="space-y-6">
                        <div class="space-y-2">
                            <label class="flex items-center gap-2 text-sm font-bold"><i data-lucide="smartphone" class="w-4 h-4 text-red-500"></i> Phone number</label>
                            <div class="flex gap-2">
                                <div class="bg-white border border-gray-200 p-4 rounded-xl text-gray-400 flex items-center gap-1">+91 <i data-lucide="chevron-down" class="w-4 h-4"></i></div>
                                <input name="phone" placeholder="Please enter the phone number" required class="flex-1 bg-white border border-gray-200 p-4 rounded-xl outline-none" />
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="flex items-center gap-2 text-sm font-bold"><i data-lucide="lock" class="w-4 h-4 text-red-500"></i> Password</label>
                            <div class="relative">
                                <input name="pass" type="password" placeholder="Password" required class="w-full bg-white border border-gray-200 p-4 rounded-xl outline-none" />
                                <i data-lucide="eye-off" class="absolute right-4 top-4 text-gray-300"></i>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-400">
                            <div class="w-4 h-4 rounded-full border border-red-500 bg-red-500 flex items-center justify-center"><i data-lucide="check" class="w-3 h-3 text-white"></i></div>
                            Remember password
                        </div>
                        <button type="submit" class="w-full bg-red-500 text-white font-bold py-4 rounded-full shadow-lg shadow-red-200">Log in</button>
                        <button type="button" onclick="state.view='register'; render();" class="w-full border border-red-500 text-red-500 font-bold py-4 rounded-full">Register</button>
                    </form>
                </div>
            </div>`;
        }

        function renderRegister() {
            return `
            <div class="min-h-screen bg-white flex flex-col animate-in text-gray-800">
                <div class="bg-gradient-to-b from-red-500 to-red-600 p-10 pb-16 text-white text-center">
                    <h1 class="text-3xl font-black italic mt-4">Daman</h1>
                    <p class="text-sm font-bold mt-4">Register your phone</p>
                </div>
                <div class="flex-1 bg-gray-50 -mt-8 rounded-t-[2.5rem] p-8 space-y-4">
                    <form onsubmit="handleRegister(event)" class="space-y-4">
                        <div class="space-y-1">
                            <label class="text-xs font-bold text-gray-600 ml-1">Phone number</label>
                            <div class="flex gap-2">
                                <div class="bg-white border border-gray-200 px-3 py-4 rounded-xl text-xs">+91 <i data-lucide="chevron-down" class="inline w-3 h-3"></i></div>
                                <input name="phone" placeholder="Please enter the phone number" required class="flex-1 bg-white border border-gray-200 p-4 rounded-xl outline-none text-sm" />
                            </div>
                        </div>
                        <div class="space-y-1">
                            <label class="text-xs font-bold text-gray-600 ml-1">Set password</label>
                            <input name="pass" type="password" placeholder="Set password" required class="w-full bg-white border border-gray-200 p-4 rounded-xl outline-none text-sm" />
                        </div>
                        <div class="space-y-1">
                            <label class="text-xs font-bold text-gray-600 ml-1">Confirm password</label>
                            <input name="confirmPass" type="password" placeholder="Confirm password" required class="w-full bg-white border border-gray-200 p-4 rounded-xl outline-none text-sm" />
                        </div>
                        <div class="space-y-1">
                            <label class="text-xs font-bold text-gray-600 ml-1">Invite code</label>
                            <input name="invite" placeholder="Please enter the invitation code" class="w-full bg-white border border-gray-200 p-4 rounded-xl outline-none text-sm" />
                        </div>
                        <div class="flex items-center gap-2 text-[10px] text-gray-400">
                            <div class="w-4 h-4 rounded-full border border-gray-200"></div>
                            I have read and agree <span class="text-red-500">【Privacy Agreement】</span>
                        </div>
                        <button type="submit" class="w-full bg-red-600 text-white font-bold py-4 rounded-full shadow-lg shadow-red-200 uppercase tracking-widest mt-4">Register</button>
                        <button type="button" onclick="state.view='login'; render();" class="w-full py-4 text-xs font-bold text-gray-400">I have an account <span class="text-red-500 ml-2">Login</span></button>
                    </form>
                </div>
            </div>`;
        }

        function renderApp() {
            return `
            <div class="min-h-screen pb-32 transition-all">
                <header class="fixed top-0 inset-x-0 h-16 bg-black/40 backdrop-blur-xl border-b border-white/5 flex items-center justify-between px-6 z-50">
                    <div class="flex items-center gap-2">
                        <i data-lucide="zap" class="text-orange-600 w-5 h-5 fill-orange-600"></i>
                        <h1 class="font-black italic text-lg uppercase tracking-tighter">ELITE APP</h1>
                    </div>
                    <div class="px-4 py-1.5 rounded-2xl flex items-center gap-2 text-xs font-black bg-white/5 border border-white/10">
                        <i data-lucide="wallet" class="w-3.5 h-3.5 text-green-500"></i> ₹${state.userData?.balance || 0}
                    </div>
                </header>

                <main class="pt-24 px-6 max-w-lg mx-auto">
                    ${renderActiveTab()}
                </main>

                <nav class="fixed bottom-6 inset-x-6 h-20 bg-black/60 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] flex items-center justify-around px-3 z-50 shadow-2xl overflow-x-auto no-scrollbar">
                    <button onclick="state.activeTab='home'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='home' ? 'text-orange-500 -translate-y-2' : 'text-gray-500'}"><i data-lucide="trophy" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Home</span></button>
                    <button onclick="state.activeTab='lobby'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='lobby' ? 'text-orange-500 -translate-y-2' : 'text-gray-500'}"><i data-lucide="message-square" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Lobby</span></button>
                    <button onclick="state.activeTab='match'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='match' ? 'text-orange-500 -translate-y-2' : 'text-gray-500'}"><i data-lucide="gamepad-2" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Match</span></button>
                    <button onclick="state.activeTab='settings'; render()" class="flex flex-col items-center gap-1 ${state.activeTab==='settings' ? 'text-orange-500 -translate-y-2' : 'text-gray-500'}"><i data-lucide="settings" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Profile</span></button>
                </nav>
            </div>`;
        }

        function renderActiveTab() {
            if(state.activeTab === 'home') return renderHome();
            if(state.activeTab === 'lobby') return renderLobby();
            if(state.activeTab === 'match') return renderMatch();
            if(state.activeTab === 'settings') return renderSettings();
        }

        // --- SUB-VIEWS (तेरे 1000 लाइन वाले फीचर्स का लॉजिक यहाँ है) ---
        function renderHome() {
            return `
            <div class="space-y-8 animate-in">
                <div class="relative h-48 w-full rounded-[2.5rem] overflow-hidden shadow-2xl bg-black">
                    <img src="${state.appConfig?.bannerLink || 'https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=800'}" class="w-full h-full object-cover opacity-60" />
                    <div class="absolute inset-0 bg-gradient-to-t from-black flex flex-col justify-end p-8">
                        <h2 class="text-2xl font-black italic uppercase text-white tracking-tighter">Grand Scrims</h2>
                        <p class="text-[10px] font-bold opacity-80 uppercase text-white italic">Elite Squads Only</p>
                    </div>
                </div>
                <div class="space-y-4">
                    <h4 class="font-black text-[10px] uppercase italic text-gray-500 tracking-widest flex items-center gap-2"><i data-lucide="clock" class="w-4 h-4 text-orange-500"></i> LIVE TOURNAMENTS</h4>
                    ${state.matches.map(m => `
                        <div class="bg-white/5 border border-white/10 p-6 rounded-[2.5rem] relative border-l-4 border-l-orange-600 shadow-xl backdrop-blur-md">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-[9px] font-black uppercase text-orange-500 bg-orange-500/10 px-3 py-1 rounded-full border border-orange-500/20">${m.map}</span>
                                <span class="text-[9px] text-gray-500 font-bold italic">${m.time}</span>
                            </div>
                            <h5 class="text-xl font-black italic uppercase">${m.title}</h5>
                            <div class="mt-5 flex justify-between items-center">
                                <div class="text-[10px] font-bold"><p class="text-gray-500 uppercase text-[8px]">Prize</p><p class="text-green-500 text-sm italic">₹${m.prizePool}</p></div>
                                <div class="text-[10px] font-bold"><p class="text-gray-500 uppercase text-[8px]">Slots</p><p class="text-sm italic">${m.joinedCount}/${m.totalSlots || 48}</p></div>
                                <button class="px-6 py-2.5 rounded-xl bg-orange-600 text-white text-[10px] font-black uppercase shadow-lg active:scale-95">JOIN ARENA</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>`;
        }

        function renderLobby() {
            return `
            <div class="h-[75vh] flex flex-col animate-in">
                <h2 class="text-2xl font-black italic uppercase flex items-center gap-2 mb-4"><i data-lucide="message-square" class="text-orange-500"></i> GLOBAL LOBBY</h2>
                <div class="flex-1 bg-black/40 border border-white/5 rounded-[2.5rem] p-4 flex flex-col overflow-hidden relative backdrop-blur-xl">
                    <div class="flex-1 overflow-y-auto no-scrollbar space-y-4 pb-4 px-2">
                        ${state.chatMessages.map(msg => `
                            <div class="flex items-end gap-3 ${msg.uid === state.user?.uid ? 'flex-row-reverse' : ''}">
                                <div class="w-8 h-8 rounded-full bg-orange-600/20 border border-white/10 flex items-center justify-center"><i data-lucide="user" class="w-4 h-4"></i></div>
                                <div class="max-w-[75%] p-3 rounded-2xl ${msg.uid === state.user?.uid ? 'bg-orange-600 text-white rounded-br-sm' : 'bg-white/10 text-gray-200 rounded-bl-sm border border-white/5'}">
                                    <p class="text-[8px] font-black uppercase text-orange-400 mb-1 italic">${msg.username}</p>
                                    <p class="text-xs font-medium">${msg.text}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <form class="mt-2 flex gap-2">
                        <input name="msg" placeholder="Talk tactics..." class="flex-1 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 outline-none text-sm text-white focus:border-orange-500 italic" />
                        <button class="bg-orange-600 p-3.5 rounded-2xl text-white active:scale-95 transition-transform"><i data-lucide="send" class="w-5 h-5"></i></button>
                    </form>
                </div>
            </div>`;
        }

        function renderMatch() {
            const joined = state.matches.filter(m => state.userData?.joinedMatches?.includes(m.id));
            return `
            <div class="animate-in space-y-6">
                <h2 class="text-2xl font-black italic uppercase flex items-center gap-2"><i data-lucide="gamepad-2" class="text-orange-500"></i> MY REGISTRATIONS</h2>
                <div class="space-y-4 pb-12">
                    ${joined.map(m => `
                        <div class="bg-white/5 border border-white/10 p-6 rounded-[2.5rem] space-y-5 border-l-4 border-l-green-500 shadow-2xl relative overflow-hidden">
                            <div class="flex justify-between items-center">
                                <h4 class="font-black text-lg uppercase italic text-orange-500">${m.title}</h4>
                                <span class="text-[10px] font-black uppercase text-gray-500 italic">${m.time}</span>
                            </div>
                            <div class="p-5 bg-black/50 border border-white/5 rounded-3xl space-y-4 shadow-inner">
                                <div class="flex justify-between items-center"><span class="text-[10px] font-black text-gray-400 uppercase">Room ID</span><span class="text-sm font-black text-white font-mono tracking-wider">${m.roomId || 'WAITING...'}</span></div>
                                <div class="flex justify-between items-center"><span class="text-[10px] font-black text-gray-400 uppercase">Password</span><span class="text-sm font-black text-white font-mono tracking-wider">${m.roomPass || 'WAITING...'}</span></div>
                            </div>
                            <button class="w-full bg-purple-600/20 border border-purple-500/30 text-purple-400 py-3 rounded-2xl font-black uppercase text-[10px] italic flex items-center justify-center gap-2 active:scale-95 transition-all">
                                <i data-lucide="bot" class="w-4 h-4"></i> Ask AI Coach ✨
                            </button>
                        </div>
                    `).join('')}
                    ${joined.length === 0 ? `<div class="text-center py-20 text-gray-500 font-black uppercase text-xs italic opacity-50">No active registrations</div>` : ''}
                </div>
            </div>`;
        }

        function renderSettings() {
            return `
            <div class="space-y-6 animate-in pb-12">
                <h2 class="text-2xl font-black italic uppercase flex items-center gap-2"><i data-lucide="settings" class="text-orange-500"></i> MY PROFILE</h2>
                <div class="bg-white/5 p-8 rounded-[3rem] border border-white/10 space-y-8 shadow-2xl backdrop-blur-md">
                    <div class="flex flex-col items-center gap-4 text-center">
                        <div class="relative group cursor-pointer">
                            <div class="w-36 h-36 rounded-[2.8rem] bg-orange-600/20 flex items-center justify-center border-4 border-orange-600/30 shadow-2xl">
                                <i data-lucide="user" class="w-16 h-16 text-orange-500"></i>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-black text-3xl tracking-tighter italic uppercase text-orange-500">@${state.userData?.username || 'GAMER'}</h4>
                            <p class="text-[10px] text-gray-500 font-mono font-bold mt-1 uppercase italic">ID: ${state.user?.uid}</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-black/40 p-6 rounded-[2.2rem] text-center border border-white/5 border-l-2 border-l-green-500 shadow-inner">
                            <i data-lucide="medal" class="w-6 h-6 text-green-500 mx-auto mb-1"></i>
                            <p class="text-[9px] font-black text-gray-500 uppercase italic">Wins</p>
                            <p class="text-3xl font-black italic text-green-500">${state.userData?.totalWins || 0}</p>
                        </div>
                        <div class="bg-black/40 p-6 rounded-[2.2rem] text-center border border-white/5 border-l-2 border-l-orange-500 shadow-inner">
                            <i data-lucide="gamepad-2" class="w-6 h-6 text-orange-500 mx-auto mb-1"></i>
                            <p class="text-[9px] font-black text-gray-500 uppercase italic">Matches</p>
                            <p class="text-3xl font-black italic text-orange-500">${state.userData?.joinedMatches?.length || 0}</p>
                        </div>
                    </div>
                    <div class="bg-white/5 border border-white/10 rounded-3xl p-6 space-y-4 shadow-xl">
                        <div class="flex items-center justify-between">
                            <h5 class="font-black text-[10px] uppercase italic tracking-widest text-gray-400 flex items-center gap-2"><i data-lucide="qr-code" class="w-4 h-4 text-green-500"></i> MY WALLET</h5>
                            <span class="text-2xl font-black text-green-500 italic">₹${state.userData?.balance || 0}</span>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button class="bg-green-600/20 text-green-500 border border-green-500/30 py-3.5 rounded-xl font-black uppercase text-[10px] italic active:scale-95">ADD FUNDS</button>
                            <button class="bg-red-600/20 text-red-500 border border-red-500/30 py-3.5 rounded-xl font-black uppercase text-[10px] italic active:scale-95">WITHDRAW</button>
                        </div>
                    </div>
                    <button onclick="auth.signOut()" class="w-full bg-red-600/10 border border-red-600/20 text-red-500 py-7 rounded-[2.5rem] font-black uppercase tracking-widest text-[11px] italic flex items-center justify-center gap-3 active:scale-95 shadow-xl transition-all">
                        <i data-lucide="log-out" class="w-5 h-5"></i> TERMINATE SESSION
                    </button>
                </div>
            </div>`;
        }

    </script>
</body>
</html>

        function startListeners(uid) {
            [span_2](start_span)// User Profile[span_2](end_span)
            db.collection('artifacts').doc(appId).collection('users').doc(uid).collection('profile').doc('data')
                .onSnapshot(doc => { if(doc.exists()) state.userData = doc.data(); render(); });

            [span_3](start_span)// Matches[span_3](end_span)
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('matches')
                .onSnapshot(snap => { state.matches = snap.docs.map(d => ({id: d.id, ...d.data()})); render(); });

            [span_4](start_span)// Chat[span_4](end_span)
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('chat')
                .onSnapshot(snap => { 
                    state.chatMessages = snap.docs.map(d => ({id: d.id, ...d.data()})).sort((a,b) => a.timestamp - b.timestamp).slice(-50); 
                    render(); 
                });

            [span_5](start_span)// Config[span_5](end_span)
            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('config').doc('settings')
                .onSnapshot(doc => { if(doc.exists()) state.appConfig = doc.data(); render(); });
        }

        // --- HANDLERS (Daman Style Login/Register) ---
        async function handleRegister(e) {
            e.preventDefault();
            const f = new FormData(e.target);
            const phone = f.get('phone');
            const pass = f.get('pass');
            const confirm = f.get('confirmPass');
            const invite = f.get('invite');

            if (pass !== confirm) return showToast("Passwords do not match!", "error");
            
            try {
                const email = `${phone}@elite.com`; // Phone को email बना रहे हैं
                const res = await auth.createUserWithEmailAndPassword(email, pass);
                await db.collection('artifacts').doc(appId).collection('users').doc(res.user.uid).collection('profile').doc('data').set({
                    username: `Gamer_${phone.slice(-4)}`,
                    balance: 100, role: 'user', uid: res.user.uid, totalWins: 0, joinedMatches: [], inviteCode: invite
                [span_6](start_span)});[span_6](end_span)
            } catch (err) { showToast(err.message, "error"); }
        }

        async function handleLogin(e) {
            e.preventDefault();
            const f = new FormData(e.target);
            try {
                await auth.signInWithEmailAndPassword(`${f.get('phone')}@elite.com`, f.get('pass'));
            } catch (err) { showToast("Login failed! Invalid credentials.", "error"); }
        }

        // --- UI RENDERING (The 1000 Line Logic) ---
        function render() {
            const root = document.getElementById('app');
            
            if (state.view === 'login' || state.view === 'register') {
                root.innerHTML = renderAuthView();
            } else {
                root.innerHTML = renderAppView();
            }
            lucide.createIcons();
        }

        function renderAuthView() {
            const isLogin = state.view === 'login';
            return `
            <div class="min-h-screen flex flex-col items-center justify-center p-8 animate-in">
                <div class="w-20 h-20 bg-orange-600 rounded-[2.2rem] flex items-center justify-center mb-6 shadow-2xl rotate-12">
                    <i data-lucide="gamepad-2" class="w-12 h-12 text-white"></i>
                </div>
                <h1 class="text-4xl font-black italic uppercase mb-2">${isLogin ? 'ELITE LOGIN' : 'JOIN SQUAD'}</h1>
                <p class="text-gray-500 text-[10px] font-bold uppercase tracking-[0.4em] mb-10 italic">Elite Tournaments Arena</p>
                
                <form onsubmit="${isLogin ? 'handleLogin(event)' : 'handleRegister(event)'}" class="w-full max-w-sm space-y-4">
                    <div class="relative">
                        <i data-lucide="phone" class="absolute left-4 top-5 w-5 h-5 text-gray-600"></i>
                        <input name="phone" type="tel" placeholder="Phone Number" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                    </div>
                    <div class="relative">
                        <i data-lucide="lock" class="absolute left-4 top-5 w-5 h-5 text-gray-600"></i>
                        <input name="pass" type="password" placeholder="${isLogin ? 'Password' : 'Set Password'}" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                    </div>
                    ${!isLogin ? `
                        <input name="confirmPass" type="password" placeholder="Confirm Password" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        <input name="invite" type="text" placeholder="Invite Code (Optional)" class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 outline-none font-bold text-sm text-white focus:border-orange-500" />
                    ` : ''}
                    <button type="submit" class="w-full bg-orange-600 text-white font-black py-5 rounded-2xl uppercase tracking-widest text-xs shadow-xl active:scale-95 transition-all">
                        ${isLogin ? 'ENTER ARENA' : 'CREATE ACCOUNT'}
                    </button>
                </form>
                <button onclick="state.view='${isLogin ? 'register' : 'login'}'; render();" class="mt-8 text-orange-500 text-[10px] font-black uppercase tracking-widest italic hover:underline">
                    ${isLogin ? 'New Survivor? Register' : 'Already have account? Login'}
                </button>
            </div>`;
        }

        function renderAppView() {
            return `
            <div class="min-h-screen pb-32">
                <header class="fixed top-0 inset-x-0 h-16 bg-black/40 backdrop-blur-xl border-b border-white/5 flex items-center justify-between px-6 z-50">
                    <div class="flex items-center gap-2">
                        <i data-lucide="zap" class="text-orange-600 w-5 h-5 fill-orange-600"></i>
                        <h1 class="font-black italic text-lg uppercase tracking-tighter">ELITE APP</h1>
                    </div>
                    <div class="px-4 py-1.5 rounded-2xl flex items-center gap-2 text-xs font-black bg-white/5 border border-white/10 shadow-sm">
                        <i data-lucide="wallet" class="w-3.5 h-3.5 text-green-500"></i> ₹${state.userData?.balance || 0}
                    </div>
                </header>

                <main class="pt-24 px-6 max-w-lg mx-auto">
                    ${renderTabContent()}
                </main>

                <nav class="fixed bottom-6 inset-x-6 h-20 bg-black/60 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] flex items-center justify-around px-3 z-50 shadow-2xl overflow-x-auto no-scrollbar">
                    <button onclick="state.activeTab='home'; render()" class="${state.activeTab==='home' ? 'tab-active' : 'text-gray-500'} flex flex-col items-center gap-1 transition-all"><i data-lucide="trophy"></i><span class="text-[8px] font-black uppercase">Home</span></button>
                    <button onclick="state.activeTab='lobby'; render()" class="${state.activeTab==='lobby' ? 'tab-active' : 'text-gray-500'} flex flex-col items-center gap-1 transition-all"><i data-lucide="message-square"></i><span class="text-[8px] font-black uppercase">Lobby</span></button>
                    <button onclick="state.activeTab='match'; render()" class="${state.activeTab==='match' ? 'tab-active' : 'text-gray-500'} flex flex-col items-center gap-1 transition-all"><i data-lucide="gamepad-2"></i><span class="text-[8px] font-black uppercase">Match</span></button>
                    <button onclick="state.activeTab='settings'; render()" class="${state.activeTab==='settings' ? 'tab-active' : 'text-gray-500'} flex flex-col items-center gap-1 transition-all"><i data-lucide="settings"></i><span class="text-[8px] font-black uppercase">Profile</span></button>
                </nav>
            </div>`;
        }

        function renderTabContent() {
            if(state.activeTab === 'home') {
                return `
                <div class="space-y-8 animate-in">
                    <div class="relative h-48 w-full rounded-[2.5rem] overflow-hidden shadow-2xl bg-black border border-white/5">
                        <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover opacity-60" />
                        <div class="absolute inset-0 bg-gradient-to-t from-black flex flex-col justify-end p-8">
                            <h2 class="text-2xl font-black italic uppercase text-white tracking-tighter">Grand Scrims</h2>
                            <p class="text-[10px] font-bold opacity-80 uppercase text-white italic">Elite Squads Only</p>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <h4 class="font-black text-[10px] uppercase italic text-gray-500 tracking-widest flex items-center gap-2"><i data-lucide="clock" class="w-4 h-4 text-orange-500"></i> LIVE TOURNAMENTS</h4>
                        ${state.matches.map(m => `
                            <div class="bg-white/5 border border-white/10 p-6 rounded-[2.5rem] relative border-l-4 border-l-orange-600 shadow-xl">
                                <div class="flex justify-between items-start mb-2">
                                    <span class="text-[9px] font-black uppercase text-orange-500 bg-orange-500/10 px-3 py-1 rounded-full">${m.map}</span>
                                    <span class="text-[9px] text-gray-500 font-bold italic">${m.time}</span>
                                </div>
                                <h5 class="text-xl font-black italic uppercase">${m.title}</h5>
                                <div class="mt-5 flex justify-between items-center">
                                    <div class="text-[10px] font-bold text-green-500">₹${m.prizePool}</div>
                                    <button class="px-6 py-2.5 rounded-xl bg-orange-600 text-white text-[10px] font-black uppercase shadow-lg active:scale-95">JOIN ARENA</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
            }
            if(state.activeTab === 'settings') {
                return `
                <div class="space-y-6 animate-in">
                    <div class="bg-white/5 p-8 rounded-[3rem] border border-white/10 space-y-6 text-center shadow-2xl backdrop-blur-md">
                        <div class="w-32 h-32 rounded-[2.5rem] bg-orange-600/20 mx-auto flex items-center justify-center border-4 border-orange-600/30">
                            <i data-lucide="user" class="w-16 h-16 text-orange-500"></i>
                        </div>
                        <div>
                            <h4 class="font-black text-2xl italic uppercase text-orange-500">@${state.userData?.username || 'GAMER'}</h4>
                            <p class="text-[9px] text-gray-500 font-mono mt-1 italic">UID: ${state.user?.uid}</p>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-black/40 p-5 rounded-3xl border border-white/5 border-l-2 border-l-green-500">
                                <p class="text-[8px] text-gray-500 uppercase font-black">Wins</p>
                                <p class="text-2xl font-black italic text-green-500">${state.userData?.totalWins || 0}</p>
                            </div>
                            <div class="bg-black/40 p-5 rounded-3xl border border-white/5 border-l-2 border-l-orange-500">
                                <p class="text-[8px] text-gray-500 uppercase font-black">Matches</p>
                                <p class="text-2xl font-black italic text-orange-500">${state.userData?.joinedMatches?.length || 0}</p>
                            </div>
                        </div>
                        <button onclick="auth.signOut()" class="w-full bg-red-600/10 border border-red-600/20 text-red-500 py-5 rounded-2xl font-black uppercase text-[10px] italic flex items-center justify-center gap-2 active:scale-95 transition-all">
                            <i data-lucide="log-out" class="w-4 h-4"></i> TERMINATE SESSION
                        </button>
                    </div>
                </div>`;
            }
            return `<div class="py-20 text-center text-gray-500 font-black uppercase text-xs italic opacity-30">Content Coming Soon...</div>`;
        }

        // --- UTILS ---
        function showToast(msg, type='success') {
            alert(msg); // अभी के लिए simple alert, बाद में toast बना सकते हैं
        }

    </script>
</body>
</html>
            const phone = f.get('phone');
            const pass = f.get('pass');
            const confirmPass = f.get('confirmPass');
            const invite = f.get('invite');

            if (pass !== confirmPass) return alert("Passwords match नहीं कर रहे!");
            
            try {
                // फोन नंबर को ईमेल की तरह इस्तेमाल कर रहे हैं ताकि पासवर्ड सिस्टम चले
                const email = `${phone}@elite.com`; 
                [span_3](start_span)[span_4](start_span)const res = await auth.createUserWithEmailAndPassword(email, pass);[span_3](end_span)[span_4](end_span)
                
                await db.collection('artifacts').doc(appId).collection('users').doc(res.user.uid).collection('profile').doc('data').set({
                    username: `Gamer_${phone.slice(-4)}`,
                    phone: phone,
                    balance: 100,
                    role: 'user',
                    uid: res.user.uid,
                    inviteCode: invite || '',
                    totalWins: 0,
                    joinedMatches: []
                [span_5](start_span)});[span_5](end_span)
            } catch (err) { alert(err.message); }
        }

        async function handleLogin(e) {
            e.preventDefault();
            const f = new FormData(e.target);
            const phone = f.get('phone');
            const pass = f.get('pass');
            
            try {
                [span_6](start_span)[span_7](start_span)await auth.signInWithEmailAndPassword(`${phone}@elite.com`, pass);[span_6](end_span)[span_7](end_span)
            } catch (err) { alert("Login failed! नंबर या पासवर्ड चेक करें।"); }
        }

        function fetchData(uid) {
            db.collection('artifacts').doc(appId).collection('users').doc(uid).collection('profile').doc('data').onSnapshot(doc => {
                state.userData = doc.data();
                render();
            [span_8](start_span)});[span_8](end_span)

            db.collection('artifacts').doc(appId).collection('public').doc('data').collection('matches').onSnapshot(snap => {
                state.matches = snap.docs.map(d => ({id: d.id, ...d.data()}));
                render();
            [span_9](start_span)});[span_9](end_span)
        }

        // --- RENDERING ---
        function render() {
            const root = document.getElementById('app');
            
            if (state.view === 'login') {
                root.innerHTML = `
                <div class="min-h-screen flex flex-col items-center justify-center p-8 animate-in">
                    <div class="w-20 h-20 bg-orange-600 rounded-[2.2rem] flex items-center justify-center mb-6 shadow-2xl rotate-12">
                        <i data-lucide="gamepad-2" class="w-12 h-12 text-white"></i>
                    </div>
                    <h1 class="text-4xl font-black italic uppercase mb-2">ELITE LOGIN</h1>
                    <p class="text-gray-500 text-[10px] font-bold uppercase tracking-[0.4em] mb-12 italic">Log in with your phone number</p>
                    
                    <form onsubmit="handleLogin(event)" class="w-full max-w-sm space-y-4">
                        <div class="relative">
                            <i data-lucide="phone" class="absolute left-4 top-5 w-5 h-5 text-gray-500"></i>
                            <input name="phone" type="tel" placeholder="Phone Number" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        </div>
                        <div class="relative">
                            <i data-lucide="lock" class="absolute left-4 top-5 w-5 h-5 text-gray-500"></i>
                            <input name="pass" type="password" placeholder="Password" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 pl-12 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        </div>
                        <button type="submit" class="w-full bg-orange-600 text-white font-black py-5 rounded-2xl uppercase tracking-widest text-xs shadow-xl shadow-orange-600/20 active:scale-95 transition-all">ENTER ARENA</button>
                    </form>
                    
                    <button onclick="state.view='register'; render();" class="mt-8 text-orange-500 text-[10px] font-black uppercase tracking-widest italic hover:underline">New Survivor? Register Now</button>
                </div>`;
            } 
            else if (state.view === 'register') {
                root.innerHTML = `
                <div class="min-h-screen flex flex-col items-center justify-center p-8 animate-in">
                    <h1 class="text-3xl font-black italic uppercase mb-2">CREATE SQUAD</h1>
                    <p class="text-gray-500 text-[10px] font-bold uppercase tracking-[0.4em] mb-8 italic text-center">Register your phone to start</p>
                    
                    <form onsubmit="handleRegister(event)" class="w-full max-w-sm space-y-4">
                        <input name="phone" type="tel" placeholder="Phone Number (+91)" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-4 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        <input name="pass" type="password" placeholder="Set Password" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-4 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        <input name="confirmPass" type="password" placeholder="Confirm Password" required class="w-full bg-white/5 border border-white/10 rounded-2xl p-4 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        <input name="invite" type="text" placeholder="Invite Code (Optional)" class="w-full bg-white/5 border border-white/10 rounded-2xl p-4 outline-none font-bold text-sm text-white focus:border-orange-500" />
                        
                        <button type="submit" class="w-full bg-orange-600 text-white font-black py-5 rounded-2xl uppercase tracking-widest text-xs shadow-xl shadow-orange-600/20 active:scale-95 transition-all">JOIN SQUAD</button>
                    </form>
                    
                    <button onclick="state.view='login'; render();" class="mt-8 text-orange-500 text-[10px] font-black uppercase tracking-widest italic hover:underline">Already a member? Login</button>
                </div>`;
            }
            else {
                // Main App UI (Same as before)
                root.innerHTML = `
                <div class="min-h-screen pb-32">
                    <header class="fixed top-0 inset-x-0 h-16 bg-black/40 backdrop-blur-xl border-b border-white/5 flex items-center justify-between px-6 z-50">
                        <div class="flex items-center gap-2">
                            <i data-lucide="zap" class="text-orange-600 w-5 h-5 fill-orange-600"></i>
                            <h1 class="font-black italic text-lg uppercase tracking-tighter">ELITE APP</h1>
                        </div>
                        <div class="px-4 py-1.5 rounded-2xl flex items-center gap-2 text-xs font-black bg-white/5 border border-white/10 shadow-sm">
                            <i data-lucide="wallet" class="w-3.5 h-3.5 text-green-500"></i> ₹${state.userData?.balance || 0}
                        </div>
                    </header>

                    <main class="pt-24 px-6 max-w-lg mx-auto">
                        <div class="space-y-8">
                            <div class="bg-white/5 border border-white/10 p-6 rounded-[2rem] border-l-4 border-l-orange-600 shadow-2xl">
                                <h2 class="text-xl font-black italic uppercase">Welcome, @${state.userData?.username}</h2>
                                <p class="text-[10px] text-gray-500 font-bold uppercase mt-1">Status: Active Survivor</p>
                            </div>

                            <h4 class="font-black text-[10px] uppercase italic text-gray-500 tracking-widest flex items-center gap-2">
                                <i data-lucide="clock" class="w-4 h-4 text-orange-500"></i> LIVE TOURNAMENTS
                            </h4>
                            
                            <div class="space-y-4">
                                ${state.matches.map(m => `
                                    <div class="bg-white/5 border border-white/10 p-6 rounded-[2.5rem] backdrop-blur-md shadow-xl border-l-2 border-l-orange-500">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="text-[9px] font-black uppercase text-orange-500 bg-orange-500/10 px-3 py-1 rounded-full">${m.map}</span>
                                            <span class="text-[9px] text-gray-500 font-bold italic">${m.time}</span>
                                        </div>
                                        <h5 class="text-xl font-black italic uppercase">${m.title}</h5>
                                        <div class="mt-5 flex justify-between items-center">
                                            <div class="text-[10px] font-bold"><p class="text-gray-500 uppercase text-[8px]">Prize</p><p class="text-green-500 text-sm font-mono italic">₹${m.prizePool}</p></div>
                                            <button class="px-6 py-2.5 rounded-xl bg-orange-600 text-white text-[10px] font-black uppercase shadow-lg active:scale-95">JOIN ARENA</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </main>

                    <nav class="fixed bottom-6 inset-x-6 h-20 bg-black/60 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] flex items-center justify-around px-3 z-50 shadow-2xl">
                        <button class="text-orange-500 flex flex-col items-center gap-1"><i data-lucide="trophy" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Home</span></button>
                        <button onclick="auth.signOut()" class="text-gray-500 flex flex-col items-center gap-1"><i data-lucide="log-out" class="w-6 h-6"></i><span class="text-[8px] font-black uppercase italic">Exit</span></button>
                    </nav>
                [span_10](start_span)[span_11](start_span)[span_12](start_span)[span_13](start_span)[span_14](start_span)[span_15](start_span)</div>`;[span_10](end_span)[span_11](end_span)[span_12](end_span)[span_13](end_span)[span_14](end_span)[span_15](end_span)
            }
            lucide.createIcons();
        }
    </script>
</body>
</html>
