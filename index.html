<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Pro Arena | Pro Gaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; background-color: #05050a; color: white; }
        .custom-scrollbar::-webkit-scrollbar { width: 0px; }
        @keyframes swing { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }
        .animate-swing { animation: swing 2s ease-in-out infinite; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .tab-active { color: #ea580c; transform: scale(1.1); }
        .tab-active div { background: rgba(234, 88, 12, 0.1); }
    </style>
</head>
<body>

    <div id="recaptcha-container"></div>

    <!-- UI TOAST -->
    <div id="toast" class="fixed top-10 left-1/2 -translate-x-1/2 z-[2000] px-6 py-4 rounded-full bg-orange-600 text-white font-black italic text-xs hidden animate-bounce uppercase shadow-2xl"></div>

    <!-- LOADING SCREEN -->
    <div id="loader" class="fixed inset-0 bg-[#05050a] z-[1500] flex flex-col items-center justify-center space-y-4 transition-opacity duration-500">
        <div class="w-12 h-12 border-4 border-orange-600 border-t-transparent rounded-full animate-spin"></div>
        <div class="text-orange-600 font-black italic tracking-widest animate-pulse uppercase">Syncing Arena...</div>
    </div>

    <!-- AUTH SCREEN -->
    <div id="auth-screen" class="hidden min-h-screen flex items-center justify-center p-8">
        <div class="w-full max-w-sm space-y-8">
            <div class="text-center">
                <div class="w-20 h-20 bg-orange-600 rounded-[2rem] flex items-center justify-center mx-auto mb-6 shadow-xl shadow-orange-600/20 rotate-12">
                    <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                </div>
                <h1 class="text-4xl font-black italic uppercase tracking-tighter">Elite <span class="text-orange-600">Pro</span></h1>
                <p class="text-gray-500 text-sm mt-2 font-bold uppercase tracking-widest" id="auth-title">Member Login</p>
            </div>

            <!-- Steps: Login or Register Toggle -->
            <div id="auth-steps" class="space-y-4">
                <!-- Phone Input -->
                <div id="step-phone" class="space-y-4">
                    <input id="phone-input" type="tel" placeholder="Mobile Number" class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 outline-none font-bold focus:border-orange-600/50">
                    <input id="pass-input" type="password" placeholder="Password" class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 outline-none font-bold focus:border-orange-600/50">
                    <button onclick="handleLogin()" class="w-full bg-orange-600 py-5 rounded-2xl font-black uppercase tracking-widest shadow-lg shadow-orange-600/20">Login</button>
                    <button onclick="toggleAuthMode(true)" class="w-full text-gray-500 text-xs font-bold uppercase">New Warrior? Create Account</button>
                </div>

                <!-- OTP Step (Registration) -->
                <div id="step-otp" class="hidden space-y-4">
                    <p class="text-center text-xs text-orange-500 font-bold">OTP sent to your number</p>
                    <input id="otp-input" type="text" placeholder="6-Digit OTP" class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-center text-2xl font-black tracking-widest outline-none">
                    <button onclick="verifyRegistrationOtp()" class="w-full bg-orange-600 py-5 rounded-2xl font-black uppercase tracking-widest">Verify & Set Password</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="main-app" class="hidden min-h-screen flex flex-col">
        <!-- Header -->
        <header class="fixed top-0 inset-x-0 h-16 bg-black/40 backdrop-blur-2xl border-b border-white/5 flex items-center justify-between px-6 z-50">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-orange-600 rounded-lg flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M13 10V3L4 14h7v7l9-11h-7z" stroke-width="2.5"></path></svg></div>
                <span class="font-black italic text-lg uppercase">Elite Arena</span>
            </div>
            <div class="flex items-center gap-3">
                <div onclick="setTab('profile')" class="px-4 py-1.5 rounded-full bg-white/5 border border-white/10 flex items-center gap-2 text-xs font-black cursor-pointer hover:bg-white/10 transition-all">
                    <span class="text-green-500">₹</span> <span id="user-balance">0</span>
                </div>
            </div>
        </header>

        <!-- Global Alert -->
        <div id="global-alert-box" class="pt-20 px-6 hidden">
            <div class="bg-orange-600/10 border border-orange-600/20 p-4 rounded-2xl flex items-center gap-3">
                <div class="animate-swing text-orange-500"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" stroke-width="2"></path></svg></div>
                <p id="alert-text" class="text-xs font-bold text-orange-200 truncate"></p>
            </div>
        </div>

        <!-- Content Area -->
        <main id="content" class="flex-1 max-w-xl mx-auto w-full px-6 pt-24 pb-32"></main>

        <!-- Navigation -->
        <nav class="fixed bottom-6 inset-x-6 h-20 bg-black/60 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] flex items-center justify-around px-2 z-50">
            <button onclick="setTab('home')" id="nav-home" class="nav-btn flex flex-col items-center gap-1 transition-all">
                <div class="p-2 rounded-xl"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" stroke-width="2.5"></path></svg></div>
                <span class="text-[9px] font-black uppercase italic">Warzone</span>
            </button>
            <button onclick="setTab('lobby')" id="nav-lobby" class="nav-btn flex flex-col items-center gap-1 transition-all">
                <div class="p-2 rounded-xl"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" stroke-width="2.5"></path></svg></div>
                <span class="text-[9px] font-black uppercase italic">Lobby</span>
            </button>
            <button onclick="setTab('profile')" id="nav-profile" class="nav-btn flex flex-col items-center gap-1 transition-all">
                <div class="p-2 rounded-xl"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" stroke-width="2.5"></path></svg></div>
                <span class="text-[9px] font-black uppercase italic">Arsenal</span>
            </button>
        </nav>
    </div>

    <!-- MODALS -->
    <div id="modal-layer" class="hidden fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex items-center justify-center p-6"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signInWithPhoneNumber, RecaptchaVerifier, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, collection, query, orderBy, limit, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js";

        // ==========================================
        // CONFIGURATION (INSERT YOUR DATA HERE)
        // ==========================================
        const firebaseConfig = {
  apiKey: "AIzaSyDPChNIAQz0gEmsuDFpACl0XvWm-DNcf2k",
  authDomain: "eliteweb-5b512.firebaseapp.com",
  projectId: "eliteweb-5b512",
  storageBucket: "eliteweb-5b512.firebasestorage.app",
  messagingSenderId: "474751993215",
  appId: "1:474751993215:web:88be5ffccdd88651cf464a",
  measurementId: "G-9HZY4280CY"
};
        const appId = 'elite_pro_final_v1';
        const RAZORPAY_KEY = "rzp_test_xxxxxxx"; // Replace with your key

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const functions = getFunctions(app);

        // --- GLOBAL STATE ---
        let state = {
            user: null,
            userData: null,
            activeTab: 'home',
            matches: [],
            lobbyMessages: [],
            isRegistering: false,
            confirmationResult: null
        };

        // --- UI HELPERS ---
        const ui = {
            toast: (msg, type = 'success') => {
                const el = document.getElementById('toast');
                el.innerText = msg;
                el.className = `fixed top-10 left-1/2 -translate-x-1/2 z-[2000] px-6 py-4 rounded-full text-white font-black italic text-xs animate-bounce uppercase shadow-2xl ${type === 'error' ? 'bg-red-600' : 'bg-orange-600'}`;
                el.classList.remove('hidden');
                setTimeout(() => el.classList.add('hidden'), 3000);
            },
            loader: (show) => {
                document.getElementById('loader').style.opacity = show ? '1' : '0';
                setTimeout(() => document.getElementById('loader').classList.toggle('hidden', !show), 500);
            },
            modal: (content, show = true) => {
                const layer = document.getElementById('modal-layer');
                layer.innerHTML = content || '';
                layer.classList.toggle('hidden', !show);
            }
        };

        // --- AUTH LOGIC ---
        window.toggleAuthMode = (isReg) => {
            state.isRegistering = isReg;
            document.getElementById('auth-title').innerText = isReg ? 'Warrior Registration' : 'Member Login';
            document.querySelector('#step-phone button').innerText = isReg ? 'Verify Phone (OTP)' : 'Login';
        };

        window.handleLogin = async () => {
            const phone = document.getElementById('phone-input').value;
            const pass = document.getElementById('pass-input').value;

            if (phone.length < 10) return ui.toast("Invalid phone number", "error");
            
            ui.loader(true);
            if (state.isRegistering) {
                // REGISTRATION FLOW
                try {
                    const verifier = new RecaptchaVerifier(auth, 'recaptcha-container', { size: 'invisible' });
                    state.confirmationResult = await signInWithPhoneNumber(auth, `+91${phone}`, verifier);
                    document.getElementById('step-phone').classList.add('hidden');
                    document.getElementById('step-otp').classList.remove('hidden');
                    ui.toast("OTP Sent!");
                } catch (e) { ui.toast("Verification failed", "error"); }
            } else {
                // LOGIN FLOW (Phone + Password)
                try {
                    const loginFunc = httpsCallable(functions, 'verifySecureLogin');
                    const result = await loginFunc({ phone, password: pass });
                    if (result.data.success) {
                        // Normally we'd use a custom token returned from the function
                        // For this demo structure, we use simple phone auth + password doc check
                        // REAL PRO: Use result.data.token to signInWithCustomToken
                        await auth.signInAnonymously(); // Simplified for demo; use proper custom token in prod
                    } else {
                        ui.toast("Invalid Credentials", "error");
                    }
                } catch (e) { ui.toast("Login server error", "error"); }
            }
            ui.loader(false);
        };

        window.verifyRegistrationOtp = async () => {
            const otp = document.getElementById('otp-input').value;
            const pass = document.getElementById('pass-input').value;
            if (pass.length < 6) return ui.toast("Password must be 6+ chars", "error");

            ui.loader(true);
            try {
                const result = await state.confirmationResult.confirm(otp);
                // After phone verified, create the profile with hashed password via function
                const regFunc = httpsCallable(functions, 'registerUserProfile');
                await regFunc({ password: pass, username: `Player_${result.user.uid.slice(0,5)}` });
                ui.toast("Account Created!");
            } catch (e) { ui.toast("Invalid OTP", "error"); }
            ui.loader(false);
        };

        // --- DATA LISTENERS ---
        const initDataListeners = () => {
            // Profile
            onSnapshot(doc(db, 'artifacts', appId, 'users', auth.currentUser.uid, 'profile', 'data'), (snap) => {
                if (snap.exists()) {
                    state.userData = snap.data();
                    document.getElementById('user-balance').innerText = state.userData.balance;
                    if (state.activeTab === 'profile') render();
                }
            });

            // Matches
            onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'matches'), (snap) => {
                state.matches = snap.docs.map(d => ({ id: d.id, ...d.data() }));
                if (state.activeTab === 'home') render();
            });

            // Lobby
            const qChat = query(collection(db, 'artifacts', appId, 'public', 'data', 'chat'), orderBy('timestamp', 'desc'), limit(30));
            onSnapshot(qChat, (snap) => {
                state.lobbyMessages = snap.docs.map(d => ({ id: d.id, ...d.data() })).reverse();
                if (state.activeTab === 'lobby') render();
            });

            // Alerts
            onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'globalAlert'), (snap) => {
                if (snap.exists()) {
                    const alert = snap.data();
                    document.getElementById('global-alert-box').classList.remove('hidden');
                    document.getElementById('alert-text').innerText = alert.text;
                }
            });
        };

        // --- NAVIGATION & RENDERING ---
        window.setTab = (tab) => {
            state.activeTab = tab;
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('tab-active'));
            document.getElementById(`nav-${tab}`).classList.add('tab-active');
            render();
        };

        const render = () => {
            const root = document.getElementById('content');
            root.innerHTML = '';

            if (state.activeTab === 'home') {
                let html = `<div class="space-y-6 animate-in fade-in duration-500">
                    <div class="flex items-center justify-between">
                        <h2 class="text-xl font-black italic uppercase">Live Tournaments</h2>
                        <span class="text-[10px] bg-orange-600/10 text-orange-500 px-3 py-1 rounded-full font-bold">ACTIVE</span>
                    </div>`;
                
                state.matches.forEach(m => {
                    html += `
                    <div class="relative bg-white/5 border border-white/10 rounded-[2.5rem] overflow-hidden group hover:border-orange-600/30 transition-all">
                        <div class="absolute top-0 right-0 bg-orange-600 px-6 py-2 text-[10px] font-black uppercase italic rounded-bl-3xl z-10">${m.type || 'SOLO'}</div>
                        <div class="p-8">
                            <h3 class="text-2xl font-black uppercase italic mb-1">${m.title}</h3>
                            <div class="flex gap-4 mt-6">
                                <div class="flex-1 bg-black/40 p-4 rounded-3xl border border-white/5">
                                    <p class="text-[9px] text-gray-500 font-black uppercase">Win Prize</p>
                                    <p class="text-lg font-black text-green-500">₹${m.prizePool}</p>
                                </div>
                                <div class="flex-1 bg-black/40 p-4 rounded-3xl border border-white/5">
                                    <p class="text-[9px] text-gray-500 font-black uppercase">Entry Fee</p>
                                    <p class="text-lg font-black text-orange-500">₹${m.entryFee}</p>
                                </div>
                            </div>
                            <button onclick="openJoinDialog('${m.id}')" class="w-full mt-8 bg-orange-600 py-4 rounded-2xl font-black uppercase tracking-widest hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-orange-600/20">Join Warzone</button>
                        </div>
                    </div>`;
                });
                root.innerHTML = html + `</div>`;
            }

            if (state.activeTab === 'lobby') {
                let html = `<div class="h-[60vh] flex flex-col space-y-4">
                    <div id="chat-scroller" class="flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar">`;
                state.lobbyMessages.forEach(msg => {
                    const isMe = msg.uid === auth.currentUser.uid;
                    html += `<div class="flex flex-col ${isMe ? 'items-end' : 'items-start'}">
                        <span class="text-[9px] text-gray-600 font-black uppercase mb-1 px-2">${msg.username}</span>
                        <div class="max-w-[80%] px-4 py-3 rounded-2xl text-sm font-medium ${isMe ? 'bg-orange-600 rounded-tr-none' : 'bg-white/10 border border-white/5 rounded-tl-none'}">${msg.text}</div>
                    </div>`;
                });
                html += `</div>
                    <div class="flex gap-2">
                        <input id="chat-input" placeholder="Type battle cry..." class="flex-1 bg-white/5 border border-white/10 rounded-2xl p-4 outline-none font-bold text-sm">
                        <button onclick="sendLobbyChat()" class="bg-orange-600 p-4 rounded-2xl"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" stroke-width="2"></path></svg></button>
                    </div>
                </div>`;
                root.innerHTML = html;
                const scroller = document.getElementById('chat-scroller');
                if (scroller) scroller.scrollTop = scroller.scrollHeight;
            }

            if (state.activeTab === 'profile') {
                root.innerHTML = `
                <div class="space-y-6 text-center animate-in slide-in-from-bottom-4">
                    <div class="relative w-32 h-32 mx-auto">
                        <div class="absolute inset-0 bg-orange-600 blur-3xl opacity-20 rounded-full"></div>
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=${auth.currentUser.uid}" class="w-32 h-32 rounded-[2.5rem] border-4 border-orange-600/20 relative z-10 bg-[#05050a]">
                    </div>
                    <h2 class="text-3xl font-black italic uppercase tracking-tighter">${state.userData?.username || 'WARRIOR'}</h2>
                    <p class="text-orange-500 font-black text-xs uppercase tracking-widest">RANK: ELITE | XP: ${state.userData?.xp || 0}</p>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-white/5 border border-white/10 p-6 rounded-[2rem]">
                            <p class="text-[9px] text-gray-500 font-black uppercase mb-1">Total Wins</p>
                            <p class="text-2xl font-black text-white">${state.userData?.totalWins || 0}</p>
                        </div>
                        <div class="bg-white/5 border border-white/10 p-6 rounded-[2rem]">
                            <p class="text-[9px] text-gray-500 font-black uppercase mb-1">Balance</p>
                            <p class="text-2xl font-black text-green-500">₹${state.userData?.balance || 0}</p>
                        </div>
                    </div>

                    <div class="space-y-3 pt-4">
                        <button onclick="initiateDeposit()" class="w-full flex items-center justify-between p-6 bg-white/5 border border-white/10 rounded-[2rem] hover:bg-white/10 transition-all">
                            <span class="font-black uppercase italic text-sm">Add War Funds</span>
                            <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4" stroke-width="3"></path></svg>
                        </button>
                        <button onclick="auth.signOut()" class="w-full p-6 bg-red-600/5 border border-red-600/10 rounded-[2rem] text-red-500 font-black uppercase italic text-sm">Retreat (Logout)</button>
                    </div>
                </div>`;
            }
        };

        // --- MATCH & PAYMENT CORE (SECURE CALLS) ---
        window.openJoinDialog = (mid) => {
            const m = state.matches.find(x => x.id === mid);
            if (state.userData.balance < m.entryFee) return ui.toast("Insufficient Gold!", "error");
            
            ui.modal(`
                <div class="w-full max-w-sm bg-[#0c0c0c] border border-orange-600/20 rounded-[3rem] p-8 space-y-6">
                    <h3 class="text-2xl font-black uppercase italic text-center">Confirm Entry</h3>
                    <div class="bg-white/5 p-4 rounded-2xl text-center">
                        <p class="text-[10px] text-gray-500 font-black">TOURNAMENT</p>
                        <p class="font-bold text-orange-500">${m.title}</p>
                    </div>
                    <div class="space-y-4">
                        <input id="game-ign" placeholder="Game Name (IGN)" class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none font-bold">
                        <input id="game-uid" placeholder="Game Character UID" class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none font-bold">
                    </div>
                    <button onclick="secureJoinMatch('${mid}')" class="w-full bg-orange-600 py-5 rounded-2xl font-black uppercase tracking-widest shadow-lg shadow-orange-600/20">Pay ₹${m.entryFee}</button>
                    <button onclick="ui.modal(null, false)" class="w-full text-gray-500 font-bold text-sm">Cancel</button>
                </div>
            `);
        };

        window.secureJoinMatch = async (matchId) => {
            const ign = document.getElementById('game-ign').value;
            const guid = document.getElementById('game-uid').value;
            if (!ign || !guid) return ui.toast("All fields required", "error");

            ui.loader(true);
            try {
                // ==========================================
                // CLOUD FUNCTION CALL (SECURITY CRITICAL)
                // ==========================================
                const joinFunc = httpsCallable(functions, 'joinTournamentV2');
                const result = await joinFunc({ matchId, gameName: ign, gameUID: guid });
                
                if (result.data.success) {
                    ui.modal(null, false);
                    ui.toast("Tournament Joined!");
                } else {
                    ui.toast(result.data.message || "Join Failed", "error");
                }
            } catch (e) { ui.toast("Server error joining match", "error"); }
            ui.loader(false);
        };

        window.initiateDeposit = async () => {
            const amount = prompt("Enter amount to add (₹):");
            if (!amount || isNaN(amount) || amount < 10) return ui.toast("Min amount ₹10", "error");

            ui.loader(true);
            try {
                // 1. Create Order via Cloud Function
                const createOrder = httpsCallable(functions, 'createRazorpayOrder');
                const orderData = await createOrder({ amount: Number(amount) });

                // 2. Open Razorpay
                const options = {
                    key: RAZORPAY_KEY,
                    amount: orderData.data.amount,
                    currency: "INR",
                    order_id: orderData.data.id,
                    handler: async function (response) {
                        ui.loader(true);
                        // 3. Verify Signature via Cloud Function
                        const verifyPayment = httpsCallable(functions, 'verifyRazorpayPayment');
                        const verifyResult = await verifyPayment(response);
                        if (verifyResult.data.success) {
                            ui.toast("Funds Added Successfully!");
                        } else {
                            ui.toast("Payment Verification Failed", "error");
                        }
                        ui.loader(false);
                    }
                };
                const rzp = new window.Razorpay(options);
                rzp.open();
            } catch (e) { ui.toast("Payment Initiation Failed", "error"); }
            ui.loader(false);
        };

        // --- INIT ---
        onAuthStateChanged(auth, (user) => {
            state.user = user;
            ui.loader(false);
            if (user) {
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('main-app').classList.remove('hidden');
                initDataListeners();
                setTab('home');
            } else {
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('main-app').classList.add('hidden');
            }
        });

    </script>
</body>
</html>

